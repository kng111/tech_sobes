Менеджер контекста позволяет выделять и освобождать ресурсы строго по необходимости. В Python за это отвечает блок с оператором with. Он имеет следующую конструкцию:

Если он синхронный - __enter__ и __exit__
Если асинхронный - __aenter__ и __aexit__


На контекстный менеджер возлагается 2 функции:

Что нужно сделать в момент когда необходим доступ к ресурсу
Что нужно сделать когда доступ уже не нужен